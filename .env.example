# Hyperliquid-Bybit 跟单系统配置示例
# 使用方法：
# 1. 复制此文件为 .env： cp .env.example .env
# 2. 根据实际情况修改配置项
# 3. 注意：.env 文件包含敏感信息，不要提交到 Git

# ============================================
# Hyperliquid 监控配置
# ============================================
# 被监控的 Hyperliquid 地址（多个地址用逗号分隔）
MONITORED_ADDRESSES=0x0000000000000000000000000000000000000000

# ============================================
# 数据库配置
# ============================================
# 数据库文件路径（Docker 环境建议使用 /home/sqlite）
DB_PATH=/home/sqlite/hyper.db

# ============================================
# Bybit API 配置
# ============================================
# 从 Bybit 获取 API 密钥：https://www.bybit.com/app/user/api-management
BYBIT_API_KEY=YOUR_BYBIT_API_KEY
BYBIT_API_SECRET=YOUR_BYBIT_API_SECRET

# 运行模式: DEMO(模拟盘) 或 LIVE(实盘)
# ⚠️ 强烈建议先使用 DEMO 模式测试
BYBIT_MODE=DEMO

# HTTP代理配置（用于绕过IP限制，可选）
# 格式: http://proxy_host:proxy_port 或 socks5://proxy_host:proxy_port
# 示例: http://127.0.0.1:7890 或 socks5://127.0.0.1:1080
# 留空则不使用代理
BYBIT_PROXY_URL=

# ============================================
# 跟单模式配置
# ============================================
# 跟单模式: fixed(固定金额) 或 ratio(比例跟单)
# fixed模式: 每次开仓固定金额（不管被跟单者开多少）
# ratio模式: 按保证金占比比例计算（复制被跟单者的仓位比例）
FOLLOW_MODE=fixed

# 固定金额跟单参数（仅在FOLLOW_MODE=fixed时生效）
# 单位: USDT（仓位价值，非保证金）
# 例如: FIXED_AMOUNT=50 表示每次开仓价值$50的仓位
# 实际占用保证金 = FIXED_AMOUNT / 杠杆倍数
FIXED_AMOUNT=50.0

# 最小跟单金额（USDT）
# 低于此值的订单将被跳过，避免小额订单
MIN_COPY_VALUE=10.0

# 比例跟单时，如果计算金额小于最小下单金额，是否强制以最小金额下单
FORCE_MIN_AMOUNT_ON_SMALL_ORDER=false

# ============================================
# 杠杆配置
# ============================================
# 默认最大杠杆倍数（所有币种）
# 推荐值: 10-20倍，避免过高风险
MAX_LEVERAGE=20

# 自定义币种杠杆配置（可选）
# 格式: 币种1:倍数1,币种2:倍数2
# 示例: BTC:15,ETH:10,SOL:5
# 留空则所有币种使用默认杠杆
CUSTOM_LEVERAGE_CONFIG=

# ============================================
# 补仓策略配置
# ============================================
# 启用补仓策略（递增保证金模式）
ENABLE_PYRAMID_STRATEGY=true

# 基础保证金金额（USDT）
BASE_MARGIN_AMOUNT=1.0

# 补仓保证金百分比（基于基础保证金的倍数）
PYRAMID_FIRST_RATIO=1.0          # 第1次开仓: 100% (1.0 USDT)
PYRAMID_SECOND_RATIO=1.5         # 第2次加仓: 150% (1.5 USDT)
PYRAMID_THIRD_RATIO=2.0          # 第3次加仓: 200% (2.0 USDT)
PYRAMID_SUBSEQUENT_RATIO=2.5     # 后续加仓: 250% (2.5 USDT)

# 最大补仓次数（0表示无限制）
# 例如设置为3，则每个币种最多补仓3次（1倍、2倍、4倍后停止）
MAX_PYRAMID_COUNT=3

# 保证金限制倍数（基于基础保证金）
MAX_MARGIN_RATIO=5.0             # 最大单笔: 500% (5.0 USDT)
MIN_MARGIN_RATIO=0.5             # 最小单笔: 50% (0.5 USDT)

# ============================================
# 币种白名单配置
# ============================================
# 全局白名单已禁用，使用各账户配置文件(accounts_config.json)中的白名单设置
# 每个账户可以有独立的白名单配置
ENABLE_SYMBOL_WHITELIST=false

# 全局白名单列表（已禁用，仅作为示例保留）
# 实际白名单请在 accounts_config.json 中各账户的 symbol_whitelist 字段配置
SYMBOL_WHITELIST=

# ============================================
# 时间窗口过滤配置
# ============================================
# 重复开仓时间窗口（分钟）
# 防止短时间内重复开仓，设置为0禁用
TIME_WINDOW_MINUTES=30

# ============================================
# 限价单价格过滤配置
# ============================================
# 启用限价单价格过滤（已禁用 - 完美复制所有订单）
ENABLE_ORDER_PRICE_FILTER=false

# 分币种价格容差（百分比）- 已禁用此功能
ORDER_PRICE_TOLERANCE_BTC=1.0      # BTC: 1%
ORDER_PRICE_TOLERANCE_ETH=2.0      # ETH: 2%
ORDER_PRICE_TOLERANCE_DEFAULT=3.0  # 其他币种: 3%

# ============================================
# 订单时效性过滤配置
# ============================================
# 启用订单时效过滤
ENABLE_ORDER_TIME_FILTER=true

# 最大订单时效（小时）
# 只处理此时间内的订单，防止历史订单被执行
ORDER_MAX_AGE_HOURS=2

# ============================================
# 监控开关配置
# ============================================
# 启用成交记录监控
ENABLE_FILLS_MONITORING=true

# 启用订单记录监控
ENABLE_ORDERS_MONITORING=true

# ============================================
# TWAP配置（已禁用）
# ============================================
# 禁用TWAP检测和累积跟单功能
# TWAP订单检测复杂度高且容易误判，建议依赖轮询补充机制
ENABLE_TWAP_ACCUMULATION=false

# ============================================
# 同步配置（高级）
# ============================================
SYNC_MAX_RETRY=3
SYNC_INTERVAL=5
SYNC_MIN_POSITION_SIZE=0.001
SYNC_PRICE_TOLERANCE=0.001

# ============================================
# 中心授权服务器配置
# ============================================
# 启用中心服务器同步（将跟单账户UID同步到中心服务器）
CENTRAL_SERVER_SYNC_ENABLED=true

# 中心服务器地址
CENTRAL_SERVER_URL=http://YOUR_CENTRAL_SERVER_IP:3000

# 用户ID（从中心服务器注册后获取）
# 请在首次使用时联系管理员获取
CENTRAL_SERVER_USER_ID=

# 服务器ID（从中心服务器注册后获取）
# 请在首次使用时联系管理员获取
CENTRAL_SERVER_SERVER_ID=

# 连接超时时间（秒）
CENTRAL_SERVER_TIMEOUT=5

# 账户配置文件路径
ACCOUNTS_CONFIG_FILE=accounts_config.json
